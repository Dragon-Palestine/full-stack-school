<%- include('../include/head.ejs') %> 

<style>
/* ===== Dashboard Table Panel ===== */
.panel.table-panel {
    background: linear-gradient(145deg, rgba(255,255,255,0.02), rgba(255,255,255,0.05));
    padding: 2rem;
    border-radius: 22px;
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 15px 40px rgba(0,0,0,0.35);
    overflow-x: auto;
    margin: 2rem 0;
}

/* ===== Table ===== */
.data-table {
    width: 100%;
    border-collapse: collapse;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    text-align: center;
}

.data-table th,
.data-table td {
    padding: 1rem;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    color: #e5e7eb;
}

.data-table th {
    background: rgba(255,255,255,0.05);
    font-weight: 700;
}

/* ===== Hover Effect ===== */
.data-table tr:hover {
    background: rgba(34,211,238,0.1);
    transform: translateY(-2px);
    transition: all 0.2s;
}

/* ===== Action Buttons ===== */
.btn.sm {
    padding: 0.45rem 1rem;
    font-size: 0.75rem;
    border-radius: 999px;
    font-weight: 700;
    text-align: center;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    cursor: pointer;
    transition: all 0.25s ease;
    text-decoration: none;
    color: #020617;
}

/* Button colors */
.btn.primary {
    background: linear-gradient(135deg, #22d3ee, #0ea5e9);
}

.btn.danger {
    background: linear-gradient(135deg, #fb7185, #e11d48);
    box-shadow: 0 4px 12px rgba(225,29,72,0.4);
}

.btn.info {
    background: linear-gradient(135deg, #818cf8, #4f46e5);
}

.btn.warning {
    background: linear-gradient(135deg, #facc15, #f59e0b);
}

.btn.outline {
    background: transparent;
    border: 2px solid #4f46e5;
    color: #4f46e5;
}

.btn:hover:not(.outline) {
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba(34,211,238,0.5);
}

.btn.outline:hover {
    background: #4f46e5;
    color: #fff;
}

/* Empty row */
.empty-cell {
    text-align: center;
    font-style: italic;
    color: rgba(255,255,255,0.6);
}

/* Page Actions */
.page-actions {
    margin-top: 2rem;
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
}

/* Responsive */
@media(max-width: 900px) {
    .data-table {
        font-size: 0.9rem;
    }

    .data-table td {
        padding: 0.8rem 0.5rem;
    }

    .btn.sm {
        padding: 0.35rem 0.8rem;
        font-size: 0.7rem;
        margin-top: 5px;
    }

    .page-actions {
        flex-direction: column;
        align-items: stretch;
    }
}
</style>

<body> 
<div class="dashboard"> 

    <!-- Sidebar --> 
    <%- include('../include/teacher_side.ejs') %> 

    <!-- Main --> 
    <main class="main"> 

        <!-- Top Nav --> 
        <%- include('../include/home_nav.ejs') %> 

        <!-- Page Header --> 
        <div class="dashboard-header"> 
            <h1 class="header-title"> 
                <i class="fas fa-users"></i> 
                Student List 
            </h1> 
        </div> 

        <!-- Table Panel --> 
        <section class="panel table-panel"> 
            <div class="table-box"> 
                <table class="data-table"> 
                    <thead> 
                        <tr> 
                            <th>ID</th> 
                            <th>Name</th> 
                            <th>Email</th> 
                            <th>Role</th> 
                            <th>Actions</th> 
                        </tr> 
                    </thead> 

                    <tbody> 
                        <% if (students && students.length > 0) { %> 
                            <% students.forEach(student => { %> 
                                <tr> 
                                    <td><%= student.id %></td> 
                                    <td><%= student.name %></td> 
                                    <td><%= student.email %></td> 
                                    <td><%= student.role %></td> 
                                    <td class="actions-cell"> 

                                        <% if (selectMode === true) { %> 
                                            <a href="/teacher/subject/student/<%= subjectCode %>/add/<%= student.id %>"  
                                               class="btn sm primary"> 
                                                Select 
                                            </a> 
                                        <% } else { %> 
                                            <a href="/teacher/subject/delete/<%= subjectCode %>/<%= student.id %>"  
                                               class="btn sm danger"> 
                                                Delete 
                                            </a> 

                                            <a href="/teacher/subject/grade/<%= subjectCode %>/<%= student.id %>"  
                                               class="btn sm info"> 
                                                Grade 
                                            </a> 

                                            <a href="/teacher/subject/attendance/date/<%= subjectCode %>/<%= student.id %>"  
                                               class="btn sm warning"> 
                                                Attendance 
                                            </a> 
                                        <% } %> 

                                    </td> 
                                </tr> 
                            <% }) %> 
                        <% } else { %> 
                            <tr> 
                                <td colspan="5" class="empty-cell"> 
                                    No students found 
                                </td> 
                            </tr> 
                        <% } %> 
                    </tbody> 
                </table> 
            </div> 
        </section> 

        <!-- Bottom Action --> 
        <div class="page-actions"> 
            <% if (selectMode) { %> 
                <a href="/teacher/subject/student/<%= subjectCode %>" class="btn outline"> 
                    Back 
                </a> 
            <% } else { %> 
                <a href="/teacher/subject/student/<%= subjectCode %>/add" class="btn primary"> 
                    Add Student 
                </a> 
            <% } %> 
        </div> 

    </main> 
</div> 
</body> 
</html>
